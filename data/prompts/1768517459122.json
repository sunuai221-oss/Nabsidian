{
  "title": "The Code Refactor Genius",
  "content": "The Code Refactor Genius\n\nMakes legacy code readable without breaking anything.\n\nUsed this to refactor a 5-year-old Node.js app. Zero production bugs.\n\n---\n\n<refactoring_request>\nRefactor this code to be production-grade while maintaining exact functionality\n</refactoring_request>\n\n<current_code>\n[Paste your messy code here]\n</current_code>\n\n<context>\n<current_issues>\n[What problems are you seeing? Slow? Hard to test? Confusing logic?]\n</current_issues>\n\n<constraints>\n- Cannot change external API behavior\n- Must maintain backward compatibility\n- Need to add tests afterward\n</constraints>\n</context>\n\n<refactoring_priorities>\n1. Readability (future devs should understand this in 30 seconds)\n2. Performance (identify and fix bottlenecks)\n3. Testability (make it easy to unit test)\n4. Error handling (no silent failures)\n5. Type safety (add proper TypeScript types if applicable)\n</refactoring_priorities>\n\n<output_requirements>\n- Show before/after comparison\n- Explain EVERY significant change\n- Highlight potential breaking changes (even subtle ones)\n- Provide migration guide if data structures changed\n- Include performance impact analysis\n</output_requirements>\n\n<testing_guide>\nAlso provide 3-5 test cases that prove the refactored code works identically.\n</testing_guide>\n</refactoring_request>",
  "folder": "prompts",
  "type": "xml",
  "tags": [
    "refactor",
    "prompt"
  ],
  "metadata": {
    "image": "data:image/webp;base64,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"
  },
  "id": "1768517459122",
  "createdAt": "2026-01-15T22:50:59.122Z",
  "updatedAt": "2026-01-15T22:50:59.122Z"
}